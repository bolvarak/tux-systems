///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
'use strict'; /// Strict Syntax //////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// Sequelize Dependencies ///////////////////////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

import {
	BelongsTo,
	Column,
	DataType,
	ForeignKey,
	IsUrl,
	Model,
	Table
} from 'sequelize-typescript';

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
import User from './05-User'; /// User Model /////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/// SocialMediaProfile Table Model Definition ////////////////////////////////////////////////////////////////////////
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

@Table({
	indexes: [
		{fields: ['is_active']},
		{fields: ['type']},
		{fields: ['user_id']}
	],
	tableName: 'social_media_profile'
})
export default class SocialMediaProfile extends Model<SocialMediaProfile> {

	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/// Columns //////////////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	@Column({
		allowNull: false,
		defaultValue: DataType.UUIDV4,
		field: 'id',
		primaryKey: true,
		type: DataType.UUID
	})
	public id!: string;

	@Column({
		allowNull: false,
		defaultValue: true,
		field: 'is_active',
		type: DataType.BOOLEAN,
	})
	public isActive!: boolean;

	@Column({
		allowNull: true,
		field: 'token',
		type: DataType.TEXT
	})
	public token!: string;


	@Column({
		allowNull: false,
		field: 'type',
		type: DataType.ENUM(
			'facebook',
			'linkedin',
			'googleplus',
			'github',
			'gitlab'
		)
	})
	public type!: string;

	@IsUrl
	@Column({
		allowNull: true,
		field: 'url',
		type: DataType.TEXT
	})
	public url!: string;

	@ForeignKey(() => User)
	@Column({
		allowNull: false,
		field: 'user_id',
		type: DataType.UUID
	})
	public userId!: string;

	///////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	/// Associations /////////////////////////////////////////////////////////////////////////////////////////////////
	/////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	@BelongsTo(() => User)
	public user!: User;
}
